# ü§ñ Dual AI Chat API

> API –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–≤—É–º—è —á–∞—Ç-–±–æ—Ç–∞–º–∏: **GigaChat** (–æ–±–ª–∞—á–Ω—ã–π) –∏ **Qwen 2.5 Coder** (–ª–æ–∫–∞–ª—å–Ω—ã–π)

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üåê **GigaChat API** - –æ–±–ª–∞—á–Ω–∞—è –º–æ–¥–µ–ª—å –æ—Ç –°–±–µ—Ä–∞
- üíª **Qwen 2.5 Coder** - –ª–æ–∫–∞–ª—å–Ω–∞—è –º–æ–¥–µ–ª—å –¥–ª—è –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è
- üíæ **–ò—Å—Ç–æ—Ä–∏—è —á–∞—Ç–æ–≤** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ SQLite
- üöÄ **Streaming –≥–µ–Ω–µ—Ä–∞—Ü–∏—è** - –±—ã—Å—Ç—Ä—ã–µ –æ—Ç–≤–µ—Ç—ã –æ—Ç Qwen
- üéØ **–°–∏—Å—Ç–µ–º–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã** - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–≤–µ–¥–µ–Ω–∏—è –º–æ–¥–µ–ª–∏
- ‚ö° **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–∞–º—è—Ç–∏** - –∫–≤–∞–Ω—Ç–æ–≤–∞–Ω–∏–µ –∫—ç—à–∞ (Q4)

## üéØ –î–ª—è —á–µ–≥–æ —ç—Ç–æ –Ω—É–∂–Ω–æ?

### GigaChat
‚úÖ –û–±—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã –∏ —á–∞—Ç  
‚úÖ –ë—ã—Å—Ç—Ä—ã–µ –æ—Ç–≤–µ—Ç—ã –±–µ–∑ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ GPU  
‚úÖ –í—Å–µ–≥–¥–∞ –¥–æ—Å—Ç—É–ø–µ–Ω (–æ–±–ª–∞—á–Ω—ã–π)

### Qwen 2.5 Coder
‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏ —Ä–µ–≤—å—é –∫–æ–¥–∞  
‚úÖ –ü–æ–ª–Ω–∞—è –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö  
‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞  
‚úÖ –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω –Ω–∞ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–∏

## üìö API Endpoints

| Endpoint | –ú–µ—Ç–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|-------|----------|
| `/gigachat` | GET | –ó–∞–ø—Ä–æ—Å –∫ GigaChat |
| `/qwen` | GET | –ó–∞–ø—Ä–æ—Å –∫ Qwen |
| `/qwen/status` | GET | –°—Ç–∞—Ç—É—Å Qwen —Å–µ—Ä–≤–µ—Ä–∞ |
| `/history` | GET | –ò—Å—Ç–æ—Ä–∏—è —á–∞—Ç–∞ |

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã Qwen

–í `chat.py` –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏:

```python
request_data = {
    "temperature": 0.4,          
    "top_p": 0.9,                
    "top_k": 60,                 
    "repetition_penalty": 1.1
}
```

### –°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç

–ó–∞–¥–∞–π—Ç–µ —Ä–æ–ª—å –º–æ–¥–µ–ª–∏ –≤ `.env`:

```env
DEFAULT_SYSTEM_PROMPT="–¢—ã - —ç–∫—Å–ø–µ—Ä—Ç –ø–æ Python. –ü–∏—à–∏ —á–∏—Å—Ç—ã–π –∫–æ–¥ —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏."
```

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–∞–º—è—Ç–∏

```bash
# –ö–≤–∞–Ω—Ç–æ–≤–∞–Ω–Ω—ã–π –∫—ç—à (—ç–∫–æ–Ω–æ–º–∏—è 75% VRAM)
python qwen_server.py -m "path to model" -cache q4

# –£–≤–µ–ª–∏—á–µ–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç
python qwen_server.py -m "path to model" -l 16384
```

### GigaChat –æ—à–∏–±–∫–∞

- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ API –∫–ª—é—á –≤ `.env`
- –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –Ω–∞–ª–∏—á–∏–∏ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è —Ç–æ–∫–µ–Ω–∞

## üìä –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

| –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è | VRAM | –°–∫–æ—Ä–æ—Å—Ç—å | –ö–∞—á–µ—Å—Ç–≤–æ |
|--------------|------|----------|----------|
| Normal cache | ~14 GB | ‚ö°‚ö°‚ö° | ‚≠ê‚≠ê‚≠ê |
| Q4 cache | ~8 GB | ‚ö°‚ö° | ‚≠ê‚≠ê‚≠ê |

**–°—Ä–µ–¥–Ω—è—è —Å–∫–æ—Ä–æ—Å—Ç—å Qwen:** 40-80 —Ç–æ–∫–µ–Ω–æ–≤/—Å–µ–∫ (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç GPU)

---

**–°–æ–∑–¥–∞–Ω–æ —Å ‚ù§Ô∏è –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤**
